# 📋 Twitter情報取得 - 詳細セットアップガイド

## 🎯 完了までの流れ

1. **Google Apps Scriptの設定** (5分)
2. **Chrome拡張機能のインストール** (2分) 
3. **設定と接続テスト** (2分)
4. **動作確認** (1分)

---

## 1️⃣ Google Apps Scriptの設定

### ステップ1: プロジェクト作成

1. **[Google Apps Script](https://script.google.com/)** を開く
2. **「新しいプロジェクト」** をクリック
3. プロジェクト名を **「Twitter情報取得」** に変更

### ステップ2: コードの貼り付け

1. **`gas_code.js`** ファイルを開く
2. **全ての内容をコピー** (Ctrl+A → Ctrl+C)
3. Google Apps Scriptエディタに **貼り付け** (既存コードを置き換え)
4. **「保存」** ボタンをクリック (Ctrl+S)

### ステップ3: Webアプリとしてデプロイ

1. **「デプロイ」** → **「新しいデプロイ」** をクリック
2. **種類**で **「ウェブアプリ」** を選択
3. 設定を以下のように変更：
   - **説明**: 「Twitter情報取得」
   - **実行者**: 「自分」
   - **アクセスできるユーザー**: **「全員」** ⚠️重要
4. **「デプロイ」** をクリック
5. **デプロイURL** を **コピー** 📋 (重要！後で使用)

### ステップ4: 権限の許可

初回デプロイ時に権限確認が表示される場合：

1. **「権限を確認」** をクリック
2. **「詳細」** をクリック  
3. **「安全ではないページに移動」** をクリック
4. 必要な権限を **「許可」**

---

## 2️⃣ Chrome拡張機能のインストール

### ステップ1: デベロッパーモードを有効化

1. Chromeで **`chrome://extensions/`** を開く
2. 右上の **「デベロッパーモード」** を **ON** にする

### ステップ2: 拡張機能を読み込み

1. **「パッケージ化されていない拡張機能を読み込む」** をクリック
2. **`twitter-extension`** フォルダを選択
3. 拡張機能一覧に **「Twitter情報取得」** が表示されることを確認

### ステップ3: 拡張機能を固定（推奨）

1. Chromeの右上の **拡張機能アイコン**（パズルピース）をクリック
2. **「Twitter情報取得」** の横の **📌ピンアイコン** をクリック
3. ツールバーに拡張機能アイコンが固定される

---

## 3️⃣ 設定と接続テスト

### ステップ1: 設定画面を開く

1. **拡張機能アイコン** をクリック
2. 設定ポップアップが開く

### ステップ2: URLの設定

1. **「Google Apps Script URL」** 欄に先ほどコピーしたデプロイURLを貼り付け
2. URLが **`https://script.google.com/macros/s/...../exec`** の形式か確認
3. **「💾 設定を保存」** をクリック

### ステップ3: 接続テスト

1. **「🧪 接続テスト」** ボタンをクリック
2. **「✅ 接続テスト成功！」** が表示されることを確認
3. Google Driveに **「Twitter情報まとめ」** スプレッドシートが作成される

---

## 4️⃣ 動作確認

### ステップ1: Twitterにアクセス

1. **[Twitter (X)](https://x.com)** を開く
2. ホームタイムラインまたは任意の投稿を表示

### ステップ2: 保存ボタンの確認

1. 各投稿に **「💾 保存」** ボタンが表示されることを確認
2. ボタンがない場合は **ページを再読み込み**

### ステップ3: データ保存テスト

1. 任意の投稿の **「💾 保存」** ボタンをクリック
2. ボタンが **「✅ 保存済み」** に変わることを確認
3. Google Driveの **「Twitter情報まとめ」** スプレッドシートを開いてデータを確認

---

## ✅ 成功の確認項目

- [ ] Google Apps Scriptがデプロイされている
- [ ] Chrome拡張機能がインストールされている  
- [ ] 設定画面でURLが保存されている
- [ ] 接続テストが成功している
- [ ] Twitterで保存ボタンが表示される
- [ ] スプレッドシートにデータが保存される

---

## 🆘 よくある問題と解決法

### ❌ 「URLが設定されていません」

**原因**: 設定が保存されていない  
**解決法**: 拡張機能の設定画面でURLを再入力・保存

### ❌ 「403 Forbidden」エラー

**原因**: Google Apps Scriptのアクセス権限が「全員」になっていない  
**解決法**: デプロイ設定で「アクセスできるユーザー」を「全員」に変更

### ❌ 保存ボタンが表示されない  

**原因**: ページの読み込みタイミング  
**解決法**: ページを再読み込み（F5）

### ❌ インプレッション数が「0」のまま

**原因**: インプレッション数は限られた投稿でのみ表示  
**解決法**: 正常動作。自分の投稿で確認してください

---

## 📞 追加サポート

設定でお困りの場合は：

1. **拡張機能の設定画面**のスクリーンショット
2. **Google Apps Scriptのデプロイ画面**のスクリーンショット  
3. **エラーメッセージ**の詳細

これらを添えてお問い合わせください。